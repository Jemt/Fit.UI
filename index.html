<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="Fit.UI.css">
	<script type="text/javascript" src="Fit.UI.js"></script>
	<title>Welcome</title>

	<style type="text/css">
		body
		{
			font-family: verdana;
			font-size: 14px;
		}

		span.xxx[data-title="hej"]
		{
			background: red;
		}
	</style>
</head>
<body>
<form action="index.html" method="POST">

<div id="draggable1" style="border: 2px solid black; background-color: orange; width: 100px; height: 100px;">
	Hello world, I am draggable!
</div>

<br><br>

<div id="dropzone1" style="border: 2px solid black; background-color: green; width: 200px; height: 200px;">
	Hello world, I am a dropzone (while also being draggable - cool, huh?)
</div>

<br><br>

<b>Editor</b>

<br><br>

<ul>
	<li>Single line input</li>
	<li>Multi line input</li>
	<li>WYSIWYG/Rich/HTML/RTF Editor</li>
	<li>Maximizable</li>
	<li>Truely dirty aware</li>
	<li>API</li>
</ul>

<br><br>

<input type="button" value="Toggle: MultiLine" onclick="Fit.Controls.Find('MyInput').SetMultiLine(!Fit.Controls.Find('MyInput').GetMultiLine());">
<input type="button" value="SetHeight (px)" onclick="Fit.Controls.Find('MyInput').SetHeight(parseInt(prompt('Indtast højde i pixels', 100)));">
<input type="button" value="SetWidth (px)" onclick="Fit.Controls.Find('MyInput').SetWidth(parseInt(prompt('Indtast bredde i pixels', 500)));">
<input type="button" value="Toggle: Maximizable" onclick="Fit.Controls.Find('MyInput').SetMaximizable(!Fit.Controls.Find('MyInput').GetMaximizable());">
<input type="button" value="Toggle: Design Mode" onclick="Fit.Controls.Find('MyInput').SetDesignMode(!Fit.Controls.Find('MyInput').GetDesignMode());">
<input type="button" value="Make Draggable" onclick="new Fit.DragDrop.Draggable(Fit.Controls.Find('MyInput').GetDomElement());">
<input type="button" value="IsDirty" onclick="alert('Is dirty (different from initial value): ' + Fit.Controls.Find('MyInput').IsDirty())">
<input type="button" value="GetValue" onclick="alert('Value: ' + Fit.Controls.Find('MyInput').GetValue())">
<input type="button" value="SetValue" onclick="Fit.Controls.Find('MyInput').Value(prompt('Indtast værdi', 'Hello world'));">
<input type="button" value="Enable A-Z 0-9 RegExp" onclick="Fit.Controls.Find('MyInput').SetValidationExpression(new RegExp('^[a-z0-9 ]+$', 'i'), 'Only A-Z, 0-9 and space is allowed!', 'MyValidationScope');">
<input type="submit" value="Submit page">

<br><br>

<div id="Input"></div>

<a name="SectionTreeView"></a>
<br><br><br>

<b>TreeView</b>

<br><br>

<ul>
	<li>Implemented:
		<ul>
			<li>Performance: Indexed node lookup, Utilizing event propagation for reduced amount of event handlers</li>
			<li>Strong CSS interface</li>
			<li>Helper lines supported</li>
			<li>Truely dirty aware</li>
			<li>HTML compatible (nodes may contain rich content; HTML/CSS/JS)</li>
			<li>Selection modes: Single / Multi / None (e.g. for navigation)</li>
			<li>Part of standard control flow (gains focus)</li>
			<li>Full keyboard navigation:
				<ul>
					<li>Arrow down/up = select down/up</li>
					<li>Tab/Shift+Tab = select down/up</li>
					<li>arrow left/right = collapse/expand (also possible using Double-Click on nodes)</li>
					<li>arrow left on non-expandable node = jump to parent</li>
					<li>Spacebar = select/deselect</li>
				</ul>
			</li>
			<li>API and Event model (OnSelect, OnSelecting, OnToggle, OnToggling, OnChange)</li>
		</ul>
	</li>
	<li>TODO:
		<ul>
			<li>WebService support (consume Fit.UI standard data structures through WebService) </li>
			<li>Navigable nodes (allow URL navigation)</li>
			<li>AllowNull = False (use Required - see BaseClass!)</li>
		</ul>
	</li>
</ul>


Fit.Array.ForEach(document.querySelectorAll("li"), function(l) { new Fit.DragDrop.Draggable(l); });

<br><br>

<input type="button" value="Show dotted lines" onclick="window.ShowLines(true);">
<input type="button" value="Show solid lines" onclick="window.ShowLines(true); var t = Fit.Controls.Find('MyTreeView'); t.RemoveCssClass('FitUiControlTreeViewDotLines'); ">
<input type="button" value="Hide lines" onclick="window.ShowLines(false);">
<input type="button" value="Enable Single-selections" onclick="var t = Fit.Controls.Find('MyTreeView'); t.Selectable(true);">
<input type="button" value="Enable Multi-selections" onclick="var t = Fit.Controls.Find('MyTreeView'); t.Selectable(true, true);">
<input type="button" value="Disable selections" onclick="var t = Fit.Controls.Find('MyTreeView'); t.Selectable(false);">
<input type="button" value="Get value" onclick="var t = Fit.Controls.Find('MyTreeView'); var s = t.Selected(); var v = 'Selected:\n'; Fit.Array.ForEach(s, function(n) { v += '\n' + n.Title() }); alert(v);">
<input type="button" value="Clear" onclick="Fit.Controls.Find('MyTreeView').Clear()">
<br><br>

<div id="TreeView" style="font-size: 12px; color: #3D9CCF; padding-left: 100px;"></div>

<br><br><br><br><br><br>



<script type="text/javascript">
	window.ShowLines = function(val)
	{
		var tree = Fit.Controls.Find('MyTreeView');
		tree.ShowLines(val);
	}

	Fit.Events.OnReady(function()
	{
		new Fit.DragDrop.Draggable(document.getElementById("draggable1"));
		new Fit.DragDrop.Dropzone(document.getElementById("dropzone1"));
		new Fit.DragDrop.Draggable(document.getElementById("dropzone1"));

		var input = new Fit.Controls.Input("MyInput");
		//input.Render(document.body);
		input.Render(document.getElementById("Input"));
		input.OnChange(function(sender, value) { console.log(sender, value); });
		input.SetWidth(300);
		input.Value("Hello world");
		input.Focus();
		//input.SetMaximizable(true, 100, 300, "px");
		//input.SetMaximizable(true, 300, 900, "px");
		//input.SetHeight(40);
		//input.EnableMaximize(200);

		//new Fit.DragDrop.Draggable(input.GetDomElement());


		// TREE

		var tree = new Fit.Controls.TreeView("MyTreeView");
		tree.Selectable(true, true, true);
		tree.SetRequired(true);
		tree.ShowLines(true);

		tree.OnChange(function(sender, value)
		{
			var vals = "";

			Fit.Array.ForEach(sender.Selected(), function(node)
			{
				vals += (vals !== "" ? ", " : "") + node.Title();
			});

			console.log("OnChange: " + vals);
			//console.log("OnChange - IsDirty: " + sender.IsDirty());
		});
		tree.OnSelect(function(sender, value)
		{
			console.log("OnSelect", value.Title() + " (" + value.Value() + ") [" + value.Selected() + "]");

			if (value.Value() === "001")
			{
				console.log(" -- Canceling!");
				return false;
			}
		});
		tree.OnSelected(function(sender, value)
		{
			console.log("OnSelected", value.Title() + " (" + value.Value() + ") [" + value.Selected() + "]");
		});
		tree.OnToggle(function(sender, value)
		{
			console.log("OnToggle", value.Title() + " (" + value.Value() + ") [" + value.Selected() + "]");

			if (value.Value() === "005")
			{
				console.log(" -- Canceling!");
				return false;
			}
		});
		tree.OnToggled(function(sender, value)
		{
			console.log("OnToggled", value.Title() + " (" + value.Value() + ") [" + value.Selected() + "]");
		});

		var n1 = new Fit.Controls.TreeView.Node("<i>Salg & administration (disabled)</i>", "001");
		n1.AddChild(new Fit.Controls.TreeView.Node("Karsten", "001-1"));
		n1.AddChild(new Fit.Controls.TreeView.Node("Andreas", "001-2"));
		n1.AddChild(new Fit.Controls.TreeView.Node("Eva", "001-3"));
		n1.AddChild(new Fit.Controls.TreeView.Node("Hanne", "001-4"));
		n1.AddChild(new Fit.Controls.TreeView.Node("Anne", "001-5"));
		n1.AddChild(new Fit.Controls.TreeView.Node("Telemarketing", "001-10"));

		var n2 = new Fit.Controls.TreeView.Node("Markedsføring", "002");
		n2.AddChild(new Fit.Controls.TreeView.Node("Jens", "002-1"));
		n2.AddChild(new Fit.Controls.TreeView.Node("Louise", "002-2"));
		n2.AddChild(new Fit.Controls.TreeView.Node("Jimmy", "002-3"));

		n2.Selected(true);

		var n3 = new Fit.Controls.TreeView.Node("Produktudvikling", "003");
		n3.AddChild(new Fit.Controls.TreeView.Node("Lars", "003-1"));
		n3.AddChild(new Fit.Controls.TreeView.Node("Hans", "003-2"));
		n3.AddChild(new Fit.Controls.TreeView.Node("Jimmy", "003-3"));
		n3.AddChild(new Fit.Controls.TreeView.Node("Michael", "003-4"));
		n3.AddChild(new Fit.Controls.TreeView.Node("Ilda", "003-5"));
		n3.AddChild(new Fit.Controls.TreeView.Node("Ole", "003-6"));

		var n4 = new Fit.Controls.TreeView.Node("Deployment & Support", "004");
		n4.AddChild(new Fit.Controls.TreeView.Node("Martin", "004-1"));
		n4.AddChild(new Fit.Controls.TreeView.Node("John", "004-2"));
		n4.AddChild(new Fit.Controls.TreeView.Node("Jacob", "004-3"));
		n4.AddChild(new Fit.Controls.TreeView.Node("Anders", "004-4"));
		n4.AddChild(new Fit.Controls.TreeView.Node("Jan", "004-5"));
		n4.AddChild(new Fit.Controls.TreeView.Node("Thomas", "004-6"));
		//n4.AddChild(new Fit.Controls.TreeView.Node("<span onclick=\"location.href='http://flowit.dk'\">Navigate to FlowIT.dk</span>", "004-7"));
		n4.AddChild(new Fit.Controls.TreeView.Node("<a href=\"http://flowit.dk\">Navigate to FlowIT.dk</a>", "004-7"));
		var n4b = new Fit.Controls.TreeView.Node("IT Administration", "004b");
		n4b.AddChild(new Fit.Controls.TreeView.Node("Christian", "004b-1"));
		n4b.AddChild(new Fit.Controls.TreeView.Node("John", "004b-2"));
		n4.AddChild(n4b);
		var fcd = new Fit.Controls.TreeView.Node("Final count down", "004-6123");
		fcd.AddChild(new Fit.Controls.TreeView.Node("ABC", "00864-12345"));
		fcd.AddChild(new Fit.Controls.TreeView.Node("DEF", "00864-123456"));
		n4.AddChild(fcd);
		var n4b2 = new Fit.Controls.TreeView.Node("IT Support", "004b2");
		n4b2.AddChild(new Fit.Controls.TreeView.Node("Hovednummer", "004b2-1"));
		n4b2.AddChild(new Fit.Controls.TreeView.Node("Christian", "004b2-2"));
		n4b.AddChild(n4b2);
		//n4.AddChild(new Fit.Controls.TreeView.Node("Place holder A", "004-7"));
		//n4.AddChild(new Fit.Controls.TreeView.Node("Place holder B", "004-8"));

		var n5 = new Fit.Controls.TreeView.Node("Solution Center (expand/collapse canceled)", "005");
		n5.AddChild(new Fit.Controls.TreeView.Node("Ida", "005-1"));

		tree.AddChild(n1);
		tree.AddChild(n2);
		tree.AddChild(n3);
		tree.AddChild(n4);
		tree.AddChild(n5);

		//document.body.innerHTML = "";
		//document.body.appendChild(tree.GetDomElement());
		//document.getElementById("TreeView").appendChild(tree.GetDomElement());
		tree.Render(document.getElementById("TreeView"));

		setTimeout(function()
		{
			Fit.Controls.Find("MyTreeView").Clear();
		}, 750);
		setTimeout(function()
		{
			Fit.Controls.Find("MyTreeView").Selected([Fit.Controls.Find("MyTreeView").GetChildByValue("004"), Fit.Controls.Find("MyTreeView").GetChildByValue("005")]);
		}, 1000);
		setTimeout(function()
		{
			var ds = Fit.Controls.Find("MyTreeView").GetChildByValue("004");
			ds.Expanded(true);
		}, 1500);
		setTimeout(function()
		{
			Fit.Controls.Find("MyTreeView").GetChildByValue("001-4").Selected(false);
			Fit.Controls.Find("MyTreeView").GetChildByValue("001-4").Selected(false);
			Fit.Controls.Find("MyTreeView").GetChildByValue("001-4").Selected(true);

			var ds = Fit.Controls.Find("MyTreeView").GetChildByValue("004");
			ds.GetChildren()[0].Selected(true);
			ds.GetChildren()[3].Selected(true);
		}, 2000);

		//n1.GetChild("1798234").Dispose()


	});
</script>


<br><br>

In-place render:<br>

<script type="text/javascript">
		var input = new Fit.Controls.Input("MyRenderInPlaceInput");
		input.SetWidth(300);
		input.Value("Hello world!");
		input.Render();
</script>

<br>Two more:<br>

<script type="text/javascript">
		var input = new Fit.Controls.Input("MyRenderInPlaceInput2");
		input.SetWidth(300);
		input.Value("Hello 1");
		input.Render();

		var input = new Fit.Controls.Input("MyRenderInPlaceInput3");
		input.SetWidth(300);
		input.Value("Hello 2");
		input.Render();
</script>

<br>In-place render DONE!<br>


</form>
</body>
</html>
